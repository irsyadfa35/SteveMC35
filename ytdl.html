<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YouTube Downloader — Neon Soft</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

body { 
  font-family: 'Orbitron', sans-serif;
  background: url('https://qu.ax/vneoG.jpg') no-repeat center center fixed;
  background-size: cover;
  margin: 0; padding: 0; color: #e0f7fa;
  overflow-x: hidden; display:flex; justify-content:center; align-items:center; min-height:100vh;
}

.container { 
  background: rgba(0,0,0,0.55); padding: 25px; border-radius:12px; backdrop-filter: blur(8px);
  width: 100%; max-width: 500px; text-align:center; box-shadow:0 0 15px #00bcd4 inset; position:relative;
}

h2 { color:#00bcd4; text-shadow:0 0 5px #00bcd4; margin-bottom:20px; }

input, select { width: 68%; padding:10px; margin:10px 0; border-radius:6px; border:1.5px solid #00bcd4; background:rgba(0,0,0,0.45); color:#b2ebf2; text-shadow:0 0 2px #00bcd4; }
input::placeholder { color:#80deea; }

button { padding:10px 16px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; background:linear-gradient(45deg,#00acc1,#26c6da); color:#fff; text-shadow:0 0 5px #b2ebf2; transition:0.3s; }
button:hover { box-shadow:0 0 12px #00acc1,0 0 18px #26c6da; transform:scale(1.03); }

.result { display:none; margin-top:20px; }
.result img { width:100%; border-radius:10px; box-shadow:0 0 15px #00bcd4; }
.result .title { color:#80deea; font-weight:bold; text-shadow:0 0 5px #00bcd4; margin-top:10px; }
.result .duration { color:#b2ebf2; text-shadow:0 0 3px #00bcd4; margin-bottom:10px; }
.download-btns { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin-top:10px; }
.download-btns button { background:linear-gradient(90deg,#00acc1,#26c6da); padding:8px 14px; border-radius:10px; text-shadow:0 0 4px #b2ebf2; }

/* Loading Neon */
#loading {
  display:none;
  position:absolute;
  top:50%; left:50%;
  transform: translate(-50%, -50%);
  width:60px; height:60px;
  border:6px solid #00bcd4;
  border-top:6px solid #26c6da;
  border-radius:50%;
  animation: spin 1s linear infinite;
  box-shadow: 0 0 15px #00bcd4, 0 0 25px #26c6da;
  z-index: 10;
}

@keyframes spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}
</style>
</head>
<body>

<div class="container">
  <h2>YouTube Downloader</h2>
  <input type="text" id="ytUrl" placeholder="Masukkan link YouTube">
  <select id="formatSelect">
    <option value="mp3">Audio (MP3)</option>
    <option value="144">Video 144p</option>
    <option value="240">Video 240p</option>
    <option value="360">Video 360p</option>
    <option value="480">Video 480p</option>
    <option value="720">Video 720p</option>
    <option value="1080">Video 1080p</option>
  </select>
  <button onclick="downloadYouTube()">Download</button>

  <div id="loading"></div>

  <div class="result" id="result">
    <img id="cover" alt="Thumbnail">
    <div class="title" id="title"></div>
    <div class="duration" id="duration"></div>
    <div class="download-btns" id="downloadBtns"></div>
  </div>
</div>

<script>
async function downloadYouTube() {
  const url = document.getElementById('ytUrl').value.trim();
  const format = document.getElementById('formatSelect').value;
  const result = document.getElementById('result');
  const cover = document.getElementById('cover');
  const titleEl = document.getElementById('title');
  const durationEl = document.getElementById('duration');
  const downloadBtns = document.getElementById('downloadBtns');
  const loading = document.getElementById('loading');

  if(!url){ alert('Masukkan URL YouTube'); return; }

  result.style.display='none';
  downloadBtns.innerHTML='';
  loading.style.display='block';

  try {
    const apiUrl = `https://api.nekolabs.web.id/downloader/youtube/v1?url=${encodeURIComponent(url)}&format=${format}`;
    const proxy = `https://api.allorigins.win/get?url=${encodeURIComponent(apiUrl)}`;
    const res = await fetch(proxy);
    const wrap = await res.json();
    const data = JSON.parse(wrap.contents);

    loading.style.display='none';

    if(!data.success || !data.result){ alert('Gagal fetch data'); return; }

    const video = data.result;
    cover.src = video.cover;
    titleEl.textContent = video.title;
    durationEl.textContent = `Durasi: ${video.duration}`;

    const btn = document.createElement('button');
    btn.textContent = video.type==='audio' ? '⬇️ Unduh MP3' : `⬇️ Unduh Video (${video.format})`;
    btn.onclick = ()=>{ window.open(video.downloadUrl,'_blank'); }
    downloadBtns.appendChild(btn);

    result.style.display='block';
  } catch(e) {
    loading.style.display='none';
    console.error(e);
    alert('Gagal fetch data, coba lagi.');
  }
}
</script>

</body>
</html>